{% extends "base.html" %}
{% block title %}Мої замовлення{% endblock %}
{% block content %}
<h1 class="text-3xl font-bold mb-4">Мої замовлення</h1>

{% if not email %}
    <p>Введіть ваш email, щоб побачити історію замовлень.</p>
    <form action="{{ url_for('shop.orders') }}" method="post" class="max-w-md">
        <input type="email" name="email" required class="w-full p-2 border rounded mb-2" placeholder="Email" />
        <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded">Показати замовлення</button>
    </form>
{% else %}
    <p class="mb-4">Показано замовлення для <strong>{{ email }}</strong>. <a href="{{ url_for('shop.orders') }}" class="text-indigo-600">Змінити email</a></p>
    {% if orders and orders|length > 0 %}
        <table class="w-full mb-4">
            <thead>
                <tr>
                    <th class="text-left">ID</th>
                    <th class="text-left">Дата</th>
                    <th class="text-left">Сума</th>
                    <th class="text-left">Статус</th>
                    <th class="text-left">Дії</th>
                </tr>
            </thead>
            <tbody>
                {% for order in orders %}
                <tr class="hover:bg-gray-50">
                    <td class="py-2 px-2">{{ order['id'] }}</td>
                    <td class="py-2 px-2">{{ order['date'] }}</td>
                    <td class="py-2 px-2">{{ order['total_price'] }} грн</td>
                    <td class="py-2 px-2">{{ order['status'] }}</td>
                    <td class="py-2 px-2"><a href="{{ url_for('shop.order_history_details', order_id=order['id']) }}" class="text-indigo-600">Деталі</a></td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>Замовлень не знайдено.</p>
    {% endif %}
{% endif %}
    <div class="fixed bottom-1 right-4">
        <a href="{{ url_for('shop.shop') }}" class="inline-flex items-center justify-center bg-indigo-600 text-white px-4 py-3 rounded-full shadow-lg hover:bg-indigo-700">
            В магазин
        </a>
    </div>
{% endblock %}
